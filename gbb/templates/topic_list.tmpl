{{template "header.tmpl"}}

<style>
.separator:after { content: " | "; padding: 0 10px; }
.topic { margin: 8px 0; }
.topic-tagline { font-size:80%; padding-left: 10px; color: #444; }
</style>

<body>
  <div class="menu">
  {{if .CurrentUser}}
    <a href="/t/new/">Create new topic</a>
    <span class="separator"></span>
    <a href="/logout/" title="Logged as {{.CurrentUser.Name}}">Logout</a>
  {{else}}
    <a href="/login/">Login</a>
  {{end}}
  </div>

  {{if .Topics}}
      {{range .Topics}}
        <div class="topic">
          <a href="/t/{{.TopicID}}/{{.SlugInfo}}/">{{.Subject}}</a>
          <a href="/t/{{.TopicID}}/last-comment/{{.SlugInfo}}/">â†˜</a>
          <div class="topic-tagline">
            Created by <em>{{.Author.Name}}</em>
            {{.Created | timeago}},
            {{.ViewsCount}} view{{if ne .ViewsCount 1}}s{{end}},
            {{.CommentsCount}} comment{{if ne .CommentsCount 1}}s{{end}}
          </div>
        </div>
      {{end}}


      <div class="menu">
        {{if .NextPageAfter}}
          <a href="./?after={{.NextPageAfter}}">Next Page</a>
        {{end}}
        |
        <form action="/t/search/" method="GET" style="display:inline">
          <input type="search" name="q" required>
          <button>Search</button>
        </form>
      </div>
  {{else}}
    <div>No posts</div>
  {{end}}
</body>
