{{template "header.tmpl"}}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/trix/0.11.2/trix.css" integrity="sha256-pDPWKduF9WxqvcBHlmIQ5ErZpzaIsWccFSjkqZr6+Wo=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/trix/0.11.2/trix.js" integrity="sha256-2NXA3cKWboltg3QAU7F6JTDkLMcZJ9ZuweCSgzjpE8Y=" crossorigin="anonymous"></script>


{{template "toggle_logged.tmpl"}}

<style>
.comment { padding: 10px; margin: 20px 0; }
.comment-content { padding-left: 20px; }
</style>

<body>
  <span id="top"></span>

  <p>
    <a href="/p/">Back to listing</a>
  </p>

  <hr>

  <h1>{{.Post.Subject}}</h1>
  {{range .Comments}}
    <div class="comment" id="comment-{{.CommentID}}">
      <div class="comment-header">
        <a href="#comment-{{.CommentID}}" title="direct link to the comment">#</a>
        <a href="/u/{{.Author.UserID}}">{{.Author.Name}}</a>
        at <span title="{{.Created.Format "2006-01-02 at 15:04 -0700"}}">{{.Created.Format "Monday, _2 Jan 2006"}}</span>
      </div>
      <div class="comment-content">
        <p>{{.Content}}</p>
      </div>
    </div>
  {{end}}

  <hr>

  <p>
    {{if .NextPageAfter}}
      <a href="./?after={{.NextPageAfter}}">Next page</a>
    {{end}}
  </p>

  <p>
    <a href="#top">Top of the page</a>
    |
    <a href="/p/">Back to listing</a>
  </p>

  <form method="POST" action="/p/{{.Post.PostID}}/comment/" enctype="multipart/form-data" autocomplete="off">
    <div data-authenticated-display="block" style="display:none">
      <trix-editor class="trix-content" input="comment-content"></trix-editor>
    </div>
    <textarea name="content" id="comment-content" data-authenticated-display="none" data-unauthenticated-disabled="true" placeholder="Write your comment." required></textarea>

    <button type="submit" data-unauthenticated-disabled="true">Comment</button>
    <span data-authenticated-display="inline" style="display:none">
      writing as <em data-authenticated-content="Name"></em>
    </span>
    <span data-unauthenticated-display="inline" style="display:none">
      You must <a href="/login/?next=/p/{{.Post.PostID}}/">login</a> to comment.
    </span>

  </form>
  <span id="bottom"></span>
</body>
